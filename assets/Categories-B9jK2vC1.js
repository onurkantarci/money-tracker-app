import{d as j,r as y,a as L,u as T,b as a,o as $,c as U,w as s,e as o,f as w,g as l,h as P,i as z,j as X,p as G,k as H,l as V,_ as A,m as J,n as I,q as N,C as K,F as M,s as Q,t as R,v as W,x as F}from"./index-DQID7RwC.js";const Y=C=>(G("data-v-374fae78"),C=C(),H(),C),Z=Y(()=>l("h1",{class:"headline white--text"},"Category Dialog",-1)),ee={class:"whole-categories-container"},oe={class:"radio-buttons"},te={class:"name-input"},ae={class:"bottom-buttons"},se=j({__name:"CategoryDialog",setup(C,{expose:b}){const v=y("income"),m=y(!1),d={name:""},i=L({...d}),c=T({name:{required:X}},i);async function k(){if(c.value.$invalid){console.log("Validation failed, not saving category.");return}try{await V.categories.add({name:i.name,type:v.value}),c.value.$reset(),Object.assign(i,d),h()}catch(S){console.error(`Error saving category: ${S}`)}}const r=()=>{m.value=!0},h=()=>{m.value=!1,c.value.$reset()};return b({showDialog:r,close:h}),(S,u)=>{const x=a("v-icon"),g=a("v-btn"),p=a("v-card-title"),e=a("v-radio"),t=a("v-radio-group"),_=a("v-text-field"),f=a("v-form"),n=a("v-card-text"),q=a("v-card"),O=a("v-dialog");return $(),U(O,{modelValue:m.value,"onUpdate:modelValue":u[2]||(u[2]=E=>m.value=E),"max-width":"500px"},{default:s(()=>[o(q,{class:"dialog-card"},{default:s(()=>[o(p,{class:"dialog-header"},{default:s(()=>[Z,o(g,{style:{"background-color":"#00193b",color:"white"},size:"x-small",icon:"",onClick:h},{default:s(()=>[o(x,null,{default:s(()=>[w("mdi-close")]),_:1})]),_:1})]),_:1}),o(n,null,{default:s(()=>[l("div",ee,[o(f,{onSubmit:P(k,["prevent"])},{default:s(()=>{var E;return[l("div",oe,[o(t,{label:"Category Type",modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=D=>v.value=D)},{default:s(()=>[o(e,{color:"primary",label:"Income",value:"income"}),o(e,{color:"primary",label:"Expense",value:"expense"})]),_:1},8,["modelValue"])]),l("div",te,[o(_,{"error-messages":(E=z(c).name.$errors)==null?void 0:E.map(D=>D.$message).join(", "),clearable:"",onBlur:z(c).name.$touch,onInput:z(c).name.$touch,label:"Category Name",modelValue:i.name,"onUpdate:modelValue":u[1]||(u[1]=D=>i.name=D)},null,8,["error-messages","onBlur","onInput","modelValue"])]),l("div",ae,[o(g,{color:"rgb(12, 56, 84)",size:"small",type:"button",onClick:h},{default:s(()=>[w(" Cancel ")]),_:1}),o(g,{color:"rgb(12, 56, 84)",size:"small",type:"submit",onClick:z(c).$validate},{default:s(()=>[w(" Save Category ")]),_:1},8,["onClick"])])]}),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ne=A(se,[["__scopeId","data-v-374fae78"]]),le={class:"whole-category-list"},ie={class:"revenue-table"},ce={class:"income-expense-buttons"},re={key:0,class:"no-categories"},de=["onClick"],ue={class:"delete-icon"},_e=j({__name:"CategoryList",emits:["category-selected"],setup(C,{expose:b,emit:v}){const m=v,d=y(null);function i(){r.value&&B(r.value)}function B(e){e&&e.id&&V.records.where({category_id:e.id}).delete().then(()=>{V.categories.delete(e.id).then(()=>{p(x.value?"income":"expense")})})}function c(){d.value.showDialog()}const k=L({categories:[]}),r=y(null);function h(e){r.value=e,console.log(r),m("category-selected",r.value)}function S(e){F(()=>V.categories.where({id:e}).toArray()).subscribe(_=>{const f=_[0],n=f.type;n&&(f&&(r.value=f),p(n))})}b({selectCategoryById:S});function u(e){var t;return((t=r.value)==null?void 0:t.id)===e.id}const x=y(!1),g=y(!1);function p(e){F(()=>V.categories.where({type:e}).toArray()).subscribe(_=>{k.categories=_}),e==="income"?(x.value=!0,g.value=!1):e==="expense"&&(x.value=!1,g.value=!0)}return J(()=>{p("income")}),(e,t)=>{const _=a("v-btn"),f=a("v-icon");return $(),I("div",le,[l("div",ie,[l("div",ce,[o(_,{class:N([{active:x.value},"income-button"]),variant:"text",size:"large",onClick:t[0]||(t[0]=n=>p("income"))},{default:s(()=>[w("INCOME")]),_:1},8,["class"]),o(_,{class:N([{active:g.value},"expense-button"]),variant:"text",size:"large",onClick:t[1]||(t[1]=n=>p("expense"))},{default:s(()=>[w("EXPENSE")]),_:1},8,["class"])]),o(K,{ref_key:"confirmationDialog",ref:d,action:"Category",associated:"Deleting the category will remove all the associated records!",onConfirmed:i},null,512),k.categories.length===0?($(),I("div",re," Start by adding a category... ")):($(!0),I(M,{key:1},Q(k.categories,n=>($(),I("div",{onClick:q=>h(n),key:n.id,class:N({"categories-results":!0,active:u(n)})},[l("div",null,R(n.name),1),l("span",ue,[l("button",{onClick:t[2]||(t[2]=q=>c())},[o(f,{size:"x-small"},{default:s(()=>[w("mdi-delete")]),_:1})])])],10,de))),128))]),W(e.$slots,"default",{},void 0,!0)])}}}),ve=A(_e,[["__scopeId","data-v-a14044e7"]]),me={class:"categories-container"},ge=j({__name:"Categories",setup(C){const b=y(null);function v(){b.value.showDialog()}return(m,d)=>{const i=a("v-btn");return $(),I(M,null,[l("div",me,[o(ve),o(i,{variant:"elevated",color:"#56CFE1",icon:"mdi-plus",class:"add-category-button",onClick:d[0]||(d[0]=B=>v())})]),o(ne,{ref_key:"categoryDialog",ref:b},null,512)],64)}}}),fe=A(ge,[["__scopeId","data-v-92fdf2f8"]]);export{fe as default};
