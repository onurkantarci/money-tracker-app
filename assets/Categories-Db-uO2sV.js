import{d as j,r as y,a as L,u as T,b as a,o as D,c as U,w as n,e as o,f as $,g as l,h as P,i as E,j as X,p as G,k as H,l as k,_ as A,m as J,n as z,q as N,C as K,F as M,s as Q,t as R,v as W,x as F}from"./index-BeOk8TVW.js";const Y=C=>(G("data-v-374fae78"),C=C(),H(),C),Z=Y(()=>l("h1",{class:"headline white--text"},"Category Dialog",-1)),ee={class:"whole-categories-container"},oe={class:"radio-buttons"},te={class:"name-input"},ae={class:"bottom-buttons"},ne=j({__name:"CategoryDialog",setup(C,{expose:b}){const v=y("income"),m=y(!1),d={name:""},i=L({...d}),c=T({name:{required:X}},i);async function V(){if(c.value.$invalid){console.log("Validation failed, not saving category.");return}try{await k.categories.add({name:i.name,type:v.value}),c.value.$reset(),Object.assign(i,d),h()}catch(I){console.error(`Error saving category: ${I}`)}}const r=()=>{m.value=!0},h=()=>{m.value=!1,c.value.$reset()};return b({showDialog:r,close:h}),(I,u)=>{const x=a("v-icon"),g=a("v-btn"),p=a("v-card-title"),e=a("v-radio"),t=a("v-radio-group"),_=a("v-text-field"),f=a("v-form"),s=a("v-card-text"),q=a("v-card"),O=a("v-dialog");return D(),U(O,{modelValue:m.value,"onUpdate:modelValue":u[2]||(u[2]=S=>m.value=S),"max-width":"500px"},{default:n(()=>[o(q,{class:"dialog-card"},{default:n(()=>[o(p,{class:"dialog-header"},{default:n(()=>[Z,o(g,{style:{"background-color":"#00193b",color:"white"},size:"x-small",icon:"",onClick:h},{default:n(()=>[o(x,null,{default:n(()=>[$("mdi-close")]),_:1})]),_:1})]),_:1}),o(s,null,{default:n(()=>[l("div",ee,[o(f,{onSubmit:P(V,["prevent"])},{default:n(()=>{var S;return[l("div",oe,[o(t,{label:"Category Type",modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=w=>v.value=w)},{default:n(()=>[o(e,{color:"primary",label:"Income",value:"income"}),o(e,{color:"primary",label:"Expense",value:"expense"})]),_:1},8,["modelValue"])]),l("div",te,[o(_,{"error-messages":(S=E(c).name.$errors)==null?void 0:S.map(w=>w.$message).join(", "),clearable:"",onBlur:E(c).name.$touch,onInput:E(c).name.$touch,label:"Category Name",modelValue:i.name,"onUpdate:modelValue":u[1]||(u[1]=w=>i.name=w)},null,8,["error-messages","onBlur","onInput","modelValue"])]),l("div",ae,[o(g,{color:"rgb(12, 56, 84)",size:"small",type:"button",onClick:h},{default:n(()=>[$(" Cancel ")]),_:1}),o(g,{color:"rgb(12, 56, 84)",size:"small",type:"submit",onClick:E(c).$validate},{default:n(()=>[$(" Save Category ")]),_:1},8,["onClick"])])]}),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),se=A(ne,[["__scopeId","data-v-374fae78"]]),le={class:"whole-category-list"},ie={class:"revenue-table"},ce={class:"income-expense-buttons"},re=["onClick"],de={class:"delete-icon"},ue=j({__name:"CategoryList",emits:["category-selected"],setup(C,{expose:b,emit:v}){const m=v,d=y(null);function i(){r.value&&B(r.value)}function B(e){e&&e.id&&k.records.where({category_id:e.id}).delete().then(()=>{k.categories.delete(e.id).then(()=>{p(x.value?"income":"expense")})})}function c(){d.value.showDialog()}const V=L({categories:[]}),r=y(null);function h(e){r.value=e,console.log(r),m("category-selected",r.value)}function I(e){F(()=>k.categories.where({id:e}).toArray()).subscribe(_=>{const f=_[0],s=f.type;s&&(f&&(r.value=f),p(s))})}b({selectCategoryById:I});function u(e){var t;return((t=r.value)==null?void 0:t.id)===e.id}const x=y(!1),g=y(!1);function p(e){F(()=>k.categories.where({type:e}).toArray()).subscribe(_=>{V.categories=_}),e==="income"?(x.value=!0,g.value=!1):e==="expense"&&(x.value=!1,g.value=!0)}return J(()=>{p("income")}),(e,t)=>{const _=a("v-btn"),f=a("v-icon");return D(),z("div",le,[l("div",ie,[l("div",ce,[o(_,{class:N([{active:x.value},"income-button"]),variant:"text",size:"large",onClick:t[0]||(t[0]=s=>p("income"))},{default:n(()=>[$("INCOME")]),_:1},8,["class"]),o(_,{class:N([{active:g.value},"expense-button"]),variant:"text",size:"large",onClick:t[1]||(t[1]=s=>p("expense"))},{default:n(()=>[$("EXPENSE")]),_:1},8,["class"])]),o(K,{ref_key:"confirmationDialog",ref:d,action:"Category",associated:"Deleting the category will remove all the associated records!",onConfirmed:i},null,512),(D(!0),z(M,null,Q(V.categories,s=>(D(),z("div",{onClick:q=>h(s),key:s.id,class:N({"categories-results":!0,active:u(s)})},[l("div",null,R(s.name),1),l("span",de,[l("button",{onClick:t[2]||(t[2]=q=>c())},[o(f,{size:"x-small"},{default:n(()=>[$("mdi-delete")]),_:1})])])],10,re))),128))]),W(e.$slots,"default",{},void 0,!0)])}}}),_e=A(ue,[["__scopeId","data-v-7da3fd26"]]),ve={class:"categories-container"},me=j({__name:"Categories",setup(C){const b=y(null);function v(){b.value.showDialog()}return(m,d)=>{const i=a("v-btn");return D(),z(M,null,[l("div",ve,[o(_e),o(i,{variant:"elevated",color:"#56CFE1",icon:"mdi-plus",class:"add-category-button",onClick:d[0]||(d[0]=B=>v())})]),o(se,{ref_key:"categoryDialog",ref:b},null,512)],64)}}}),pe=A(me,[["__scopeId","data-v-92fdf2f8"]]);export{pe as default};
